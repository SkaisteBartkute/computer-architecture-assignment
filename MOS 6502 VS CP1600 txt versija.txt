MOS 6502 vs. CP1600
Darbą parengė: Skaistė Bartkutė
MOS 6502CP1600Bendri pastebėjimaiElementinė kompiuterio / procesoriaus bazėMOS 6500 šeimos (įskaitant ir MOS6502 procesorių) mikroprocesorių elementinė bazė – integrinis grandinynas. Šios kompiuterių architektūros kūrėjai pabrėžia, kad nMOS depletion-load technologijos , N-tipo tranzistoriai, silicio užtūra užtikrina didesnį greitį, mažesnius energijos suvartojimo išteklius ir mažesnį procesoriaus dydį negu prieš tai sukurtos procesorių linijos (MOS TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Hardware Manual - p. ii).  Procesoriaus schema spausdinama ant plonos silicio plokštelės, procesoriaus dydis – 3.9 mm x 4.3 mm, reikalinga įtampa – 5V (Wikipedia: MOS Technology 6502, 2024).
CP1600 procesoriaus elementinė bazė – integrinis grandinynas, paremtas enhancement mode nMOS tranzistoriais, reikalaujantis +12, +5 ir -3 v įtampos šaltinių. (Wikipedia: General Instrument CP1600, 2024). Mikrokompiuterio modulio dydis: 9.75‘‘ x 9.25‘‘ coliai (General Instrument Corporation Microelectronics, 1975, p. 94).Abu procesoriai naudoja nMOS technologiją, tačiau skirtingas jos atšakas, MOS 6502 naudoja depletion-load atšaką, kuriai užtenka vieno elektros šaltinio. Tačiau CP1600 naudoja enhancement mode atšaką, tad jai reikia daugiau elektros šaltinių negu MOS 6502. nMOS priskiriami didelio integracijos mąsto grandinynams (Wikipedia: Integrated Circuit, Depletion-load NMOS logic, Depletion and enhancement modes, 2024). Kadangi abiejuose procesoriuose naudojama ta pati technologija, tad abiejų procesorių techninės savybės turėtų būti panašios, skiriasi tik elektros išteklių naudojimas – CP1600 šių išteklių reikia daugiau. Skiriasi šių architektūrų dydis: CP1600 spausdinamas ant didesnės plokštelės.Architektūros tipasVisos operacijos tarp atminties lokacijų turi būti susietos su akumuliatoriaus registru, todėl MOS 6502 yra akumuliatorinės architektūros tipo (MOS TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual - p. 4)CP1600 turi aštuonis bendros paskirties registrus, todėl yra registrinės architektūros (General Instrument Corporation Microelectronics, 1975, p. 15).MOS 6502 turi specialų akumuliatorinį registrą tarpiniams procesorių skaičiavimų rezultatams kaupti, kurie perduodami tarp atminties lokacijų, o CP1600 turi būti programuojamas taip, kad tarpiniai rezultatai būtų laikomi kažkuriuose bendros paskirties registruose.Adresų mašinos tipasMOS 6502 instrukcijoms naudoja vieną adresą, kuriame yra operandas (MOS TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual - p. 51), todėl tai vieno adreso mašina.CP1600 procesoriaus instrukcijų aprašyme yra nurodomi du operandai – source ir destination, tad tai dviejų adresų mašina (General Instrument Corporation Microelectronics, 1975, p. 43, 50).MOS 6502 turi galimybę rašyti trumpesnes ir efektyvesnes instrukcijas, kai naudoja tik vieną adresą, tačiau tai apriboja pasirinkimą tarp duomenų šaltinių ir gavėjų. CP1600 instrukcijos naudojančios du operandus nebus tokios efektyvios, tačiau suteikia didesnę pasirinkimo galimybę.RegistraiMOS 6502 yra 8 bitų mikroprocesorius, todėl registruose tokio dydžio duomenys ir apdorojami. Šis procesorius turi specialios paskirties registrus: požymių registras – procesoriaus statuso bitai, akumuliatoriaus registras tarpiniams rezultatams. Yra du indeksų registrai X ir Y naudojami formuoti efektyvius adresus (pasinaudojant programos skaitliuką). Taip pat yra steko adresų registras. Išimtis – programos skaitliukas, kuris sudarytas iš dviejų 8-bitų registrų, kuris elgiasi kaip vienas 16 bitų registras. (Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual - p. 2,3, 23, 32, 69, 78, 115).CP1600 turi aštuonis registrus, kurių plotis – 16 bitų, R6 registras naudojamas kaip stekas, o R7 – programos skaitliukas. Visi kiti registrai bendros paskirties ir gali būti naudojami kaip akumuliatoriai arba adresavimo rodyklės (addresing pointers), dar papildomai nurodomas procesoriaus statuso registras (General Instrument Corporation Microelectronics, 1975, p. 7, 15).CP1600 turi daugiau bendros paskirties registrų, tad programuojant – didesnė pasirinkimo laisvė. MOS 6502 turi specializuotus registrus, kas galėtų supaprastinti mašinos kodo rašymą.Požymių bitaiNurodomi MOS 6502 požymių bitai: carry, zero result, interrupt disable, decimal mode, break command, overflow, negative result (Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual - p. 24).Nurodomi CP1600 požymių bitai: overflow, carry, sign, zero, interrupt enable (General Instrument Corporation Microelectronics, 1975, p. 7).MOS 6502 turi daugiau požymių bitų, kas leidžia labiau kontroliuoti  procesoriaus veiklą.Duomenų plotisMOS 6502 duomenų magistralės (mašinos žodžio) plotis – 8 bitai (Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Hardware Manual - p. 15, MCS6500 Microcomputer Family Programming Manual - p. 2)CP1600 mašinos žodis – 16 bitų, kuris organizuotas į du baitus (General Instrument Corporation Microelectronics, 1975, p. 15).CP1600 gali apdoroti didesnius duomenų kiekius vieno procesoriaus ciklo metu, tačiau tai nebūtinai reiškia didesnį efektyvumą MOS 6502 atžvilgiu, kadangi 8 bitai informacijos gali būti apdorojami greičiau.Atminties kiekisMOS 6502 - adresų magistralės plotis – 16 bitų. 16 bitų gali sugeneruoti 65,536 skirtingus adresus, rodančias į tiek pat skirtingų atminties baitų. Adresai suskirstyti į 256 „puslapius“, kurių kiekvienas turi 256 specifinius adresus, vienas iš dviejų programos skaitliuko baitų (registrų) pasirenką puslapį, o kitas – specifinį adresą. Taigi, efektyvus adresas – 16 bitų (Mos TECHNOLOGY INC, 1976, p. MCS6500 Microcomputer Family Hardware Manual 6 – 8 psl.) Galimas adresų erdvės suskirstymas: 0000 – 3FFF adresai skirti RAM, 4000 – 7FFF – I/O, 8000 – FFFF adresai skirti ROM. (Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual p. 57). Taip pat, stekui skirtas pirmasis (01) adresų puslapis (Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual p. 114). Apple I mikrokompiuteris, kuris naudojo MOS 6502 siūlė 4 KB atminties (Wikipedia: Apple I, 2024).CP1600 turi 16 bitų adresų magistralę, leidžiančią sugeneruoti 65,536  skirtingus adresus. Adresų erdvė – ištisinė, o efektyvus adreso plotis – 16 bitų (General Instrument Corporation Microelectronics, 1975, p. 7, 48). Informacijos apie adresų ervės priskyrimą RAM ar ROM rasti nepavyko. Intellivision žaidimų konsolėje, kuri naudojo CP1600 procesoriaus CP1610 versiją, buvo 1456 baitai RAM ir 7168 baitai ROM (Wikipedia: Intellivision, 2024).MOS 6502 adresų erdvė yra suskirstyta, o CP1600 adresų erdvė yra ištisinė. CP1600 architektūra leidžia laisviau rinktis šio procesoriaus naudotojui, kaip naudoti adresų erdvę, o MOS 6502 adresų erdvės suskirtymas gali būti naudingas palengvinant procesoriaus instrukcijų rašymą.Virtualioji atmintisInformacijos apie virtualios atminties panaudojimą rasti nepavyko. Informacijos apie virtualios atminties panaudojimą rasti nepavyko.MOS 6502 ir CP1600 architektūros virtualios atminties neturi.Komandų sistemaKomandų klasės:
• Šešios akumuliatoriaus ir aritmetinės komandos (pvz. LDA – Load Accumulator with Memory, ADC – Add Memory with Carry to Accumulator). 
• Septynios požymių ir procesoriaus statuso komandos (pvz. SEC – Set Carry Flag, CLV – Clear Overflow Flag)
• Dešimt Test, Branch ir Jump komandų (pvz. BEQ – Branch on Result Zero, CMP – Compare Memory and Accumulator).
• Keturiolika indeksų registrų komandų (pvz. INX – Increment Index Register X by One, TAY – Transfer Accumulator to Index Y).
• Aštuonios steko komandos (pvz. PHA – Push Accumulator on Stack, PLP – Pull Processor Status from Stack).
• Trys Reset ir pertraukimų komandos (pvz. RTI – Return from Interrupt, BRK – Break Command).
• Šešios bitų perkėlimo ir atminties modifikacijų komandos (pvz. ROR – Rotate Right, DEC – Decrement Memory by One). Iš viso: 54 komados (Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual p. ii - v).  
Palaikomi instrukcijų formatai: instrukcija gali būti 1, 2 ar 3 baitų ilgio. Vienas baitas nurodo operacijos kodą, o likę 0, 1 arba 2 baitai nurodo adresą, o šių baitų kiekis priklauso nuo konkrečios operacijos. Implied instrukcijose turint tik operacijos kodą, jau žinomi duomenų šaltiniai ir gavėjai. Absolučiame adresavime nurodomas adresas operando, kuriam bus vykdoma operacija (Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual p. 51).  Instrukcijų formatas: 10 bitų. Keturi vyriausi šios instrukcijos bitai yra pavadinti Operational Field, kurie duoda šešiolika pagrindinių operacijų, padalintų į Internal Reference ir External Reference komandos. Prie operacijos kodo dažniausiai būna vienas arba du operandai (Šaltinis/adresavimo tipas ir duomenų gavėjas, iš viso dar 6 bitai) – taip gaunamas dar didesnis skaičius skirtingų komandų. External Reference komandos:
• Data Access komandos (pvz. ADD, CMP).
• Branch komandos (pvz. BMI – Branch on Minus, BGT – Branch if Greater Than)
Internal Reference komandos:
• Iš registro į registrą (pvz. ADDR – Add Register, CMPR – Compare Register)
• Registrų bitų postūmio komandos (pvz. RLC – Rotate Left using Carry Bit, SAR – Shift Arithmetic Right)
• Vieno registro (INCR – Increment Register, ADCR – Add Carry bit Register
• Vidaus valdymo (pvz. EIS – Enable Interrupt System, CLRC – Clear Carry Bit)
• Jump komandos (pvz. JSR – Jump and Save Return Address, JD – Jump to Address).
• Steko komandos (pvz. PULR – fetch top element, PSHR – push element)
Iš viso apraše minimos 87 komandos (General Instrument Corporation Microelectronics, 1975, p. 7, 42 – 58, 62).Abiejose architektūrose didžioji dalis komandų sutampa, tačiau MOS 6502 komandos dažnu atveju skirtos specifiniams registrams (pvz. akumuliatoriaus, indeksų X arba Y registrams), o CP1600 komandos - bendros paskirtiems registrams. CP1600 architektūra turi daugiau skirtingų sąlygų Jump ir Branch komandoms. Vidaus valdymo, aritmetinių operacijų komandos abiejose architektūrose panašios. Adresavimo būdaiMOS 6502 architektūros adresavimo būdai skirstomi į tris kategorijas.
 Neindeksiniai adresavimo būdai: 
• implied addresing – tik operacijos kodo baitas; 
• betarpiškas – dviejų baitų instrukcija, pirmasis baitas – operacijos kodas, o antrasis baitas – konstanta, 
• absoliutus adresavimas – pirmas baitas – operacijos kodas, antrasis baitas – žemesnieji efektyvaus adreso bitai, o trečias baitas – aukštesnieji efektyvaus adreso bitai;
• nulinio puslapio adresavimas – viename baite operacijos kodas, o kitame efektyvus adresas nuliniame atminties (adresų erdvės) puslapyje; 
• reliatyvus adresavimas – operacijos kodas ir postūmis nuo dabartinio adreso (offset).
Indeksiniai adresavimo būdai:
• absoliutus indeksinis – prie absoliutaus adreso pridedamas indekso registras;
• nulinio puslapio indeksinis – nulinio puslapio adresas modifikuojamas indekso registro.
Netiesioginio adresavimo būdai (naudojamas nulinio puslapio adresas prieiti efektyviam adresui):
• netiesioginis – prie operacijos kodo pateikiamas efektyvaus adreso adresas;
• indeksinis netiesioginis adresavimas – prie nulinio puslapio adreso pridedamas indekso registro X turinys, kad gautume rodyklę;
• netiesioginis indeksinis adresavimas – prie nulinio puslapio adrese esančio adreso pridedamas Y registro turinys;
• netiesioginis absoliutus – naudojamas netiesioginėms jmp operacijoms
(Mos TECHNOLOGY INC, 1976, MCS6500 Microcomputer Family Programming Manual p. 50, 57-63, 79 - 92).  CP1600 prie keturių bitų operacijos kodo nurodo trijų bitų adresavimo režimo bitą:
• 0 režimas – nurodyto adreso turinys naudojamas kaip „išorinis“ adresas;
• 1, 2 ir  3 režimai – atitinkamai šie registrai saugo „išorinį“ adresą (netiesioginis adresavimas);
• 4 ir 5 režimai - netiesioginis adresavimas naudojantis 4 ir 5 registrais – po operacijos šių registrų turinys inkrementuojamas;
• 6 režimas - adresavimas stekui naudojantis 6 registru (su inkrementavimu ir dekrementavimu);
• 7 režimas – betarpiškas adresavimas.
Kitu atveju prie operacijos kodo gali būti nurodomas ne režimas, o priklausomai nuo operacijos:
• duomenų šaltinio ir gavėjo registrai – dirbama su registrų turiniu;
• Branch operacijos – nurodomas postūmis, kurį reikia pridėti prie programos skaitliuko;
• perduodamas tik šaltinio registras;
• neperduodamas joks adresas ar registras (atitiktų MOS 6502 implied addresing).
(General Instrument Corporation Microelectronics, 1975, p. 46 – 58).Pagrindiniai adresavimo principai abiejose architektūrose panašūs (tiesioginis, netiesioginis, betarpiškas, reliatyvus ir implied tipo). MOS 6502 architektūra turi daug adresavimo tipų susijusių su nuliniu adresų erdvės puslapiu, ko nėra CP1600 architektūroje. Tačiau pastaroji architektūra turi nemažai adresavimo režimų susietų su konkrečiais registrais (pvz. 4 ir 5 registrų inkrementavimas gauti netiesioginiam adresui). 
https://en.wikipedia.org/wiki/Integrated_circuit#Large-scale_integration_(LSI)
https://en.wikipedia.org/wiki/General_Instrument_CP1600
https://en.wikipedia.org/wiki/MOS_Technology_6502#Design_notes
https://en.wikipedia.org/wiki/Depletion-load_NMOS_logic 
https://en.wikipedia.org/wiki/Depletion_and_enhancement_modes 
https://en.wikipedia.org/wiki/Apple_I
https://lt.wikipedia.org/wiki/Intellivision 

